# Define contexts

kubectl config get-context
kubectl config current-context
kubectl config get-clusters
kubectl config use-context gke_gbk8sprj_us-west1-a_kuar-cluster1
kubectl config use-context minikube

# minikube context
minikube version
minikube start
minikube stop



# Create node pool in gcloud
gcloud container node-pools create kuar-np --cluster kuar-cluster
# delete node pool in gcloud
gcloud container node-pools delete  kuar-np --cluster kuar-cluste


# Query k8s environments
kubectl get nodes
kubectl get services
kubectl get namespaces
kubectl describe nodes
kubectl get componentstatuses
kubectl get ds --all-namespaces


#Upgrade K8S
# 1- Upgrade control plane
#   From the master
sudo apt get upgrade kubeadm
kubeadm version
sudo kubedm upgrade plan --> Il va vous dire quelle command effectuer
kubeadm upgrade apply v1.13.1
kubectl drain <servername> --ignore-daemonsets
udo apt update
sudo apt upgrade kubelet
systemctl status kubelet
kubectl uncordon $HOSTNAME
#  For the other nodes
#     From the master
kubectl drain <servername> --ignore-daemonsets --> Les pods devraient qutter le noeud
kubectl get pods -o wide
ssh <node>
sudo apt update
sudo apt upgrade kubelet
systemctl status kubelet
exit
#     From the master
kubectl uncordon <node>
kubectl get nodes -o wide --> Le cluster doit-[etre mis 'a jour









